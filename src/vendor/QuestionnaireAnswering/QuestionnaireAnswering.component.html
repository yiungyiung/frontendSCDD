<div class="answering-container">
    <!-- Left Panel: Questionnaire Details -->
    <div class="questionnaire-details">
        <h2>Questionnaire Details</h2>
        <div class="questionnaire-info" *ngIf="selectedQuestionnaire">
            <p><strong>Name:</strong> {{ selectedQuestionnaire.name }}</p>
            <p><strong>ID:</strong> {{ selectedQuestionnaire.questionnaireID }}</p>
        </div>
        <div class="domains-container" *ngIf="filteredDomains && filteredDomains.length > 0">
            <div class="domain-card" *ngFor="let domain of filteredDomains">
                <div class="domain-header">
                    <h3>{{ domain.domainName }}</h3>
                    <button class="toggle-button" (click)="toggleSubPart(domain.domainID)">
            <mat-icon
              [svgIcon]="
                isSubPartToggled(domain.domainID) ? 'upArrow' : 'downArrow'
              "
            ></mat-icon>
          </button>
                </div>
                <div class="domain-questions" *ngIf="isSubPartToggled(domain.domainID)">
                    <button *ngFor="let question of getQuestionsByDomain(domain.domainID)" (click)="onQuestionClick(question)" class="question-button">
            {{ question.questionText }}
          </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Panel: Question Details -->
    <div class="question-details" *ngIf="selectedQuestion">
        <h2>Answer the Question</h2>
        <div class="question-content">
            <p class="question-text">
                <strong>Question:</strong> {{ selectedQuestion.questionText }}
            </p>
            <p class="question-description">{{ selectedQuestion.description }}</p>
        </div>

        <!-- Options for the question -->
        <div class="options-container" *ngIf="selectedQuestion.options && selectedQuestion.options.length">
            <label *ngFor="let option of selectedQuestion.options" class="option">
        <input
          type="radio"
          name="option"
          [(ngModel)]="selectedOption"
          [value]="option.optionID"
        />
        <span class="option-text">{{ option.optionText }}</span>
      </label>
        </div>

        <!-- Textboxes for the question -->
        <div class="textboxes-container" *ngIf="selectedQuestion.textboxes && selectedQuestion.textboxes.length">
            <label *ngFor="let textbox of selectedQuestion.textboxes" class="textbox">
        <span class="textbox-label">{{ textbox.label }}</span>
        <input
          type="text"
          class="textbox-input"
          [(ngModel)]="textboxResponses[textbox.textBoxID!]"
        />
      </label>
        </div>

        <!-- Buttons for saving, resetting, and submitting responses -->
        <button (click)="saveCurrentResponse()">Save Response</button>
        <button (click)="resetCurrentResponse()">Reset Response</button>
    </div>

    <!-- Submit all responses -->
    <button (click)="onSubmitAllResponses()">Submit All Responses</button>
</div>