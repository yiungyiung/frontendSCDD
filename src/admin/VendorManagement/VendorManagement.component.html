<div class="container">
  <div class="row">
    <!-- Add Vendor Form -->
    <div class="col-md-3">
      <div class="add-vendor-card">
        <div class="vendor-title-card">
          <h4 class="card-header">Add Vendor</h4>
        </div>
        <form [formGroup]="vendorForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="vendorName">Vendor Name </label>
            <input
              type="text"
              id="vendorName"
              formControlName="vendorName"
              class="form-control"
            />
            <div
              *ngIf="submitted && vendorForm.get('vendorName')?.invalid"
              class="error"
            >
              Please fill the required question.
            </div>
          </div>
          <div class="form-group">
            <label for="vendorRegNumber">Vendor Registration Number </label>
            <input
              type="text"
              id="vendorRegNumber"
              formControlName="vendorRegistration"
              class="form-control"
            />
            <div
              *ngIf="submitted && vendorForm.get('vendorRegistration')?.invalid"
              class="error"
            >
              Please fill the required question.
            </div>
          </div>
          <div class="form-group">
            <label for="vendorAddress">Vendor Address </label>
            <input
              type="text"
              id="vendorAddress"
              formControlName="vendorAddress"
              class="form-control"
            />
            <div
              *ngIf="submitted && vendorForm.get('vendorAddress')?.invalid"
              class="error"
            >
              Please fill the required question.
            </div>
          </div>
          <div class="form-group">
            <label for="contactPerson">Contact Person </label>
            <input
              type="text"
              id="contactPerson"
              formControlName="contactName"
              class="form-control"
            />
            <div
              *ngIf="submitted && vendorForm.get('contactName')?.invalid"
              class="error"
            >
              Please fill the required question.
            </div>
          </div>
          <div class="form-group">
            <label for="emailID">Email ID </label>
            <input
              type="email"
              id="emailID"
              formControlName="email"
              class="form-control"
            />
            <div
              *ngIf="submitted && vendorForm.get('email')?.invalid"
              class="error"
            >
              Please fill the required question.
            </div>
          </div>
          <div class="form-group">
            <label for="contactNumber">Contact Number </label>
            <input
              type="tel"
              id="contactNumber"
              formControlName="contactNumber"
              class="form-control"
            />
            <div
              *ngIf="submitted && vendorForm.get('contactNumber')?.invalid"
              class="error"
            >
              Please fill the required question.
            </div>
          </div>
          <div class="form-group">
            <label for="category">Category of Industry </label>
            <select
              id="category"
              formControlName="categoryID"
              class="form-control"
            >
              <option value="">Select Category</option>
              <option
                *ngFor="let category of categories"
                [value]="category.categoryID"
              >
                {{ category.categoryName }}
              </option>
            </select>
            <div
              *ngIf="submitted && vendorForm.get('categoryID')?.invalid"
              class="error"
            >
              Please fill the required question.
            </div>
          </div>
          <div class="form-group">
            <label for="tier">Tier </label>
            <select
              id="tier"
              formControlName="tierID"
              class="form-control"
              (change)="onTierChange($event)"
            >
              <option value="">Select Tier</option>
              <option *ngFor="let tier of tiers" [value]="tier.tierId">
                {{ tier.tierName }}
              </option>
            </select>
            <div
              *ngIf="submitted && vendorForm.get('tierID')?.invalid"
              class="error"
            >
              Please fill the required question.
            </div>
          </div>
          <div class="form-group" *ngIf="tier1Vendors.length > 0">
            <mat-form-field class="example-full-width">
              <div class="form-control">
                <input
                  matInput
                  placeholder="Search vendors"
                  [(ngModel)]="searchQuery"
                  [ngModelOptions]="{ standalone: true }"
                />
              </div>
            </mat-form-field>
            <div class="vendor-list">
              <div *ngFor="let vendor of filteredVendors" class="form-check">
                <input
                  type="checkbox"
                  class="form-check-input"
                  [id]="vendor.vendorID"
                  [value]="vendor.vendorID"
                  (change)="toggleSelection(vendor.vendorID!, $event)"
                />
                <label class="form-check-label" [for]="vendor.vendorID">{{
                  vendor.vendorName
                }}</label>
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <app-popup-box></app-popup-box>
      </div>
    </div>

    <!-- Vendors List -->
    <div class="col-md-9">
      <div class="back-card mb-3">
        <div class="card-header-container">
          <h4>Vendors</h4>

          <!-- Export,filter Icon-->
          <div class="icon-container ml-auto">
            <mat-icon
              svgIcon="exportButton"
              (click)="openExportModal()"
            ></mat-icon>
            <app-exportDialogBox
              [selectedColumns]="selectedColumns"
              [allColumns]="allColumns"
              [data]="vendors"
            ></app-exportDialogBox>
            <mat-icon svgIcon="filterIcon"></mat-icon>

            <!-- Pagination Container -->
            <app-pagination
              [currentPage]="currentPage"
              [totalPages]="totalPages"
              [itemsPerPage]="itemsPerPage"
              [totalItems]="totalItems"
              (pageChange)="onPageChange($event)"
              (itemsPerPageChange)="onItemsPerPageChange($event)"
            ></app-pagination>
          </div>
        </div>
        <!--Vendor Cards-->
        <div class="container">
          <app-vendorcard
            *ngFor="let vendor of pagedUsers"
            [vendor]="vendor"
            [toggleVendorStatus]="toggleVendorStatus.bind(this)"
          ></app-vendorcard>
        </div>
      </div>
    </div>
  </div>
</div>
